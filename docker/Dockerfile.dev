# Imagen base ligera de Node.js (ideal para desarrollo frontend)
FROM node:24-alpine

# Instalamos bash para scripts interactivos dentro del contenedor
RUN apk add --no-cache bash

# Establece el directorio de trabajo dentro del contenedor
WORKDIR /app

# Copiamos los manifiestos de dependencias (NO todo el proyecto)
COPY package*.json ./

# Instalamos herramientas globales para Expo y EAS
RUN npm install -g expo-cli eas-cli

# Nota: NO instalamos las dependencias del proyecto aquí
# El script start-expo.sh se encargará de hacer `npm install` si es necesario

# Comando por defecto (puede ser sobrescrito desde docker-compose)
CMD ["npx", "expo", "start", "--lan"]
